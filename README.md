# Box-Depalleting
# 📦 Box Depaletizing with Depth-Based Learning

> **인턴쉽 프로그램 1**  
> CMES / 한양대 지능형로봇 연구팀  
> 본 프로젝트는 팔레트 위 박스를 효율적으로 인식하고 제거하는 시스템을 개발하는 데 목적이 있습니다.

---

## 🧠 1. Depth + a 기반 학습

### ✅ 다양한 후보 입력 조합 실험
- **후보2: Grayscale + Edge + Depth**
  - Grayscale 이미지에 Edge와 Depth 정보를 추가한 형태
  - 복잡한 시각 정보 반영 가능

- **후보3: Depth + Edge + Gradient**
  - 깊이 기반 정보에 경계 정보 및 Gradient 추가
  - Edge 보정 효과

- **최종 채택: Depth 3채널**
  - Depth 정보를 R,G,B에 중복 적용하여 3채널 구성
  - 단순하지만 높은 일반화 성능 보임  
  - **성능 및 안정성 측면에서 최종 선택**

---

## 📊 2. 데이터 보강

### 🎨 Blender 활용
- **이유:** 기울어진 박스 데이터 부족
- **방법:** Blender로 다양한 각도의 박스 Scene 생성  
→ 학습 데이터의 다양성과 일반화 향상

---

## ✅ 3. 모델 테스트 결과

| 항목 | 내용 |
|------|------|
| **장점** | 조명 변화, 텍스처 영향 없음 |
| **단점** | 센서 해상도·성능 변화에 민감함 |

- 실제 로봇 환경 및 시뮬레이션 환경에서 테스트 수행
- Bounding Box로 박스 인식 성공

---

## 🔁 4. 쿼터니언 계산 (Quaternion Estimation)

박스의 3D 자세(Orientation)를 파악하기 위한 파이프라인:

1. **유효한 꼭짓점 3개 이상 확보**
2. **법선 벡터 계산**
   ```python
   normal = cross(p1 - p0, p2 - p0)
   ```
3. **단위 벡터로 정규화**
4. **법선이 아래를 향하면 방향 반전**
5. **Z축과의 회전 각도 계산**
   ```python
   rot = align_vectors([normal], [[0, 0, 1]])
   ```
6. **회전을 쿼터니언(quaternion)으로 변환**
   ```python
   quat = rot.as_quat()
   ```

---

## 📌 결론

- Depth 기반의 단순한 3채널 입력이 실제 박스 인식에 가장 적합
- Blender를 활용한 데이터 보강은 실제 상황에서의 강건성 확보에 도움
- 쿼터니언 계산을 통한 자세 추정은 로봇 작업을 위한 핵심 기술

---

> 본 프로젝트는 실물 박스 환경의 정확한 인식과 안전한 조작을 위한 **비전 기반 시스템 설계 및 실험 분석**을 다루었습니다.  

📁 **카테고리**: 컴퓨터 비전 / 로봇 비전 / 머신러닝  
🛠 **사용 기술**: Python, OpenCV, Blender, NumPy, SciPy
